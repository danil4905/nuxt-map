<template>
  <svg width="100%" height="100%" viewBox="0 0 1230 591" fill="none" xmlns="http://www.w3.org/2000/svg"
       v-if="places">
    <path
      d="M19.0067 238.315V235.772L25.3828 225.727H27.5753V229.247H26.2777L22.2582 235.608V235.728H31.3189V238.315H19.0067ZM26.3374 241V237.54L26.397 236.414V225.727H29.4247V241H26.3374Z"
      fill="#FABE00"/>
    <path
      d="M444.883 36.2088C443.77 36.2088 442.778 36.0174 441.908 35.6346C441.043 35.2468 440.359 34.7148 439.857 34.0387C439.36 33.3576 439.104 32.5721 439.089 31.6822H442.34C442.36 32.055 442.482 32.3832 442.706 32.6665C442.934 32.945 443.238 33.1612 443.615 33.3153C443.993 33.4695 444.418 33.5465 444.891 33.5465C445.383 33.5465 445.818 33.4595 446.196 33.2855C446.574 33.1115 446.869 32.8704 447.083 32.5621C447.297 32.2539 447.404 31.8984 447.404 31.4957C447.404 31.0881 447.289 30.7276 447.061 30.4144C446.837 30.0962 446.514 29.8477 446.091 29.6687C445.674 29.4897 445.176 29.4002 444.6 29.4002H443.175V27.0288H444.6C445.087 27.0288 445.517 26.9442 445.89 26.7752C446.268 26.6062 446.561 26.3725 446.77 26.0742C446.979 25.771 447.083 25.418 447.083 25.0153C447.083 24.6325 446.991 24.2969 446.807 24.0085C446.628 23.7152 446.375 23.4865 446.047 23.3224C445.723 23.1584 445.346 23.0763 444.913 23.0763C444.475 23.0763 444.075 23.1559 443.712 23.315C443.349 23.4691 443.059 23.6903 442.84 23.9787C442.621 24.267 442.504 24.6051 442.489 24.9929H439.395C439.409 24.1129 439.661 23.3374 440.148 22.6662C440.635 21.995 441.291 21.4705 442.116 21.0927C442.947 20.7099 443.884 20.5185 444.928 20.5185C445.982 20.5185 446.904 20.7099 447.695 21.0927C448.485 21.4755 449.099 21.9925 449.537 22.6438C449.979 23.2901 450.198 24.016 450.193 24.8214C450.198 25.6765 449.932 26.3899 449.395 26.9616C448.863 27.5334 448.169 27.8963 447.314 28.0504V28.1697C448.438 28.3139 449.293 28.7042 449.88 29.3406C450.471 29.9719 450.765 30.7624 450.76 31.712C450.765 32.582 450.513 33.3551 450.006 34.0312C449.504 34.7074 448.811 35.2393 447.926 35.6271C447.041 36.0149 446.027 36.2088 444.883 36.2088Z"
      fill="#FABE00"/>
    <path
      d="M769.882 20.7273V36H766.653V23.7923H766.564L763.066 25.9847V23.1211L766.847 20.7273H769.882Z"
      fill="#FABE00"/>
    <path
      d="M763.238 241V238.673L768.674 233.64C769.137 233.192 769.525 232.789 769.838 232.431C770.156 232.074 770.397 231.723 770.561 231.38C770.725 231.032 770.807 230.657 770.807 230.254C770.807 229.806 770.705 229.421 770.501 229.098C770.298 228.77 770.019 228.519 769.666 228.345C769.313 228.166 768.913 228.076 768.466 228.076C767.998 228.076 767.591 228.171 767.243 228.36C766.895 228.549 766.626 228.82 766.437 229.173C766.248 229.526 766.154 229.946 766.154 230.433H763.089C763.089 229.434 763.315 228.566 763.767 227.83C764.22 227.094 764.854 226.525 765.669 226.123C766.484 225.72 767.424 225.518 768.488 225.518C769.582 225.518 770.534 225.712 771.344 226.1C772.159 226.483 772.793 227.015 773.246 227.696C773.698 228.377 773.924 229.158 773.924 230.038C773.924 230.614 773.81 231.184 773.581 231.745C773.358 232.307 772.957 232.931 772.381 233.617C771.804 234.298 770.991 235.116 769.942 236.071L767.712 238.256V238.36H774.126V241H763.238Z"
      fill="#FABE00"/>
    <rect x="129" y="463" width="24" height="24" rx="8" fill="#E62D32"/>
    <path d="M136.621 468L136.621 474.124L136.621 482.595" stroke="white"/>
    <path d="M145.379 468L145.379 474.124L145.379 482.595" stroke="white"/>
    <path d="M141.162 468L141.162 476.108" stroke="white"/>
    <path
      d="M137.743 468V472.865H138.743V468H137.743ZM135.5 472.865V468H134.5V472.865H135.5ZM136.622 473.986C136.002 473.986 135.5 473.484 135.5 472.865H134.5C134.5 474.037 135.45 474.986 136.622 474.986V473.986ZM137.743 472.865C137.743 473.484 137.241 473.986 136.622 473.986V474.986C137.793 474.986 138.743 474.037 138.743 472.865H137.743Z"
      fill="white"/>
    <path
      d="M146.501 469.946V472.865H147.501V469.946H146.501ZM145.879 474.486V468.324H144.879V474.486H145.879ZM146.501 472.865C146.501 473.484 145.998 473.986 145.379 473.986V474.986C146.551 474.986 147.501 474.036 147.501 472.865H146.501ZM147.501 469.946C147.501 468.774 146.551 467.824 145.379 467.824V468.824C145.998 468.824 146.501 469.326 146.501 469.946H147.501Z"
      fill="white"/>
    <rect x="139.541" y="476.108" width="3.24324" height="6.48649" rx="1.62162" stroke="white"/>
    <rect x="601" y="468.5" width="24" height="24" rx="8" fill="#FABE00"/>
    <rect x="606.5" y="477.917" width="13" height="6.29167" stroke="#233255"/>
    <path d="M608.916 477.854V476.348L610.764 474.5H617.096V477.854" stroke="#233255"
          stroke-miterlimit="10"/>
    <path d="M610.666 485.875H615.333" stroke="#233255" stroke-miterlimit="10"/>
    <path d="M617.096 484.271V487.625H608.916L608.916 484.271" stroke="#233255" stroke-miterlimit="10"/>
    <path d="M617.09 487.625H615.781L617.107 486.299L617.09 487.625Z" fill="#233255"/>
    <path d="M616.947 479.458L615.916 480.49L616.947 481.521L617.978 480.49L616.947 479.458Z"
          fill="#233255"/>
    <path d="M206 157.337V152.025H212.053V146.447H217.422V140.603H223" stroke="#CCCCCC"
          stroke-width="2"/>
    <path d="M206 144.109L212.109 138M212.109 138V142.516M212.109 138H207.594" stroke="#CCCCCC"
          stroke-width="2"/>
    <path
      d="M161.952 204.658H1V505.396H161.952M161.952 204.658V150.955H172.246M161.952 204.658V267.863M161.952 505.396V331.067M161.952 505.396H743.533M242.896 150.955H418.821V1H743.533M743.533 1H1160.89V204.658M743.533 1V19.5895M743.533 86.0987V204.658M743.533 239.772V204.658M743.533 204.658H1160.89M1160.89 204.658V445.829M743.533 303.389V505.396M743.533 505.396H1006.66M1006.66 505.396H1160.89V445.829M1006.66 505.396V590H1229V445.829H1160.89"
      stroke="#CCCCCC" stroke-width="2"/>
    <g v-for="place in places" :key="place.id" :transform="place.coords + 'rotate(-18)'"
       :data="place.id">
      <circle cx="0" cy="0" r="2" fill="rgb(33, 37, 41)" :class="{'takenPlace': !place.userId}"></circle>
      <text x="0" y="0" dx="4" dy="3.5" :data="place.id" :name="`${place.User?place.User.lastName + ' ' + place.User.firstName:''}`" :class="['place', {'takenPlace': !place.userId}]">{{ !place.userId ? 'Свободно ' : `${place.User.lastName} ${place.User.firstName[0]}` }}</text>
    </g>
  </svg>
</template>

<script>
export default {
  name: "KazanMap",
  data() {
    return {
      places: []
    }
  },
  methods: {
    async getPlaces() {
      this.places = await this.$store.dispatch('places/getPlaceByComponent',{city:'Kazan', floor:3});
    }
  },
  mounted() {
    this.getPlaces()
  }
}
</script>

<style scoped>

</style>
